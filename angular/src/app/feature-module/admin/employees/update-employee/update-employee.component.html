<h2 mat-dialog-title class="text-2xl font-bold mb-4">Update Employee Information</h2>

<mat-dialog-content class="!pb-6">
  <form [formGroup]="updateForm" (ngSubmit)="onSubmit()" class="form-container">
    <!-- Personal Information Section -->
    <div class="form-section">
      <h4 class="section-title">Personal Information</h4>
      
      <div class="form-group">
        <div class="group-img">
          <i class="feather icon-user"></i>
          <input
            type="text"
            class="form-control"
            placeholder="First Name"
            formControlName="prenom"
            [ngClass]="{'is-invalid': updateForm.get('prenom')?.touched && updateForm.get('prenom')?.invalid}"
          />
          <div *ngIf="updateForm.get('prenom')?.touched && updateForm.get('prenom')?.invalid" class="invalid-feedback">
            <div *ngIf="updateForm.get('prenom')?.hasError('required')">
              First name is required
            </div>
          </div>
          <div *ngIf="apiErrors['Prenom']">
            {{ apiErrors['Prenom'] }}
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="group-img">
          <i class="feather icon-user"></i>
          <input
            type="text"
            class="form-control"
            placeholder="Last Name"
            formControlName="nom"
            [ngClass]="{'is-invalid': updateForm.get('nom')?.touched && updateForm.get('nom')?.invalid}"
          />
          <div *ngIf="updateForm.get('nom')?.touched && updateForm.get('nom')?.invalid" class="invalid-feedback">
            <div *ngIf="updateForm.get('nom')?.hasError('required')">
              Last name is required
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="group-img">
          <i class="feather icon-calendar"></i>
          <input
            matInput
            [matDatepicker]="picker"
            placeholder="Birthday"
            class="form-control"
            formControlName="birthday"
            [ngClass]="{'is-invalid': updateForm.get('birthday')?.touched && updateForm.get('birthday')?.invalid}"
          />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <div *ngIf="updateForm.get('birthday')?.touched && updateForm.get('birthday')?.invalid" class="invalid-feedback">
            <div *ngIf="updateForm.get('birthday')?.hasError('required')">
              Birthday is required
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Information Section -->
    <div class="form-section">
      <h4 class="section-title">Contact Information</h4>
      
      <div class="form-group">
        <div class="group-img">
          <i class="feather icon-mail"></i>
          <input
            type="email"
            class="form-control"
            placeholder="Email"
            formControlName="email"
            [ngClass]="{'is-invalid': updateForm.get('email')?.touched && updateForm.get('email')?.invalid}"
          />
          <div *ngIf="updateForm.get('email')?.touched && updateForm.get('email')?.invalid" class="invalid-feedback">
            <div *ngIf="updateForm.get('email')?.hasError('required')">
              Email is required
            </div>
            <div *ngIf="updateForm.get('email')?.hasError('email')">
              Please enter a valid email
            </div>
          </div>
        </div>
        <div *ngIf="apiErrors['Email']" class="invalid-feedback d-block">
            <div class="d-flex align-items-center">
              <i class="feather icon-alert-circle me-2"></i>
              <span>{{ apiErrors['Email'] }}</span>
            </div>
          </div>
      </div>
      

      <div class="form-group">
        <div class="group-img">
          <i class="feather icon-phone"></i>
          <input
            type="text"
            class="form-control"
            placeholder="Phone Number"
            formControlName="phoneNumber"
            [ngClass]="{'is-invalid': updateForm.get('phoneNumber')?.touched && updateForm.get('phoneNumber')?.invalid}"
          />
          <div *ngIf="updateForm.get('phoneNumber')?.touched && updateForm.get('phoneNumber')?.invalid" class="invalid-feedback">
            <div *ngIf="updateForm.get('phoneNumber')?.hasError('required')">
              Phone number is required
            </div>
          </div>
        </div>
        <div *ngIf="apiErrors['PhoneNumber']" class="invalid-feedback d-block">
            <div class="d-flex align-items-center">
              <i class="feather icon-alert-circle me-2"></i>
              <span>{{ apiErrors['PhoneNumber'] }}</span>
            </div>
          </div>
      </div>
     
    </div>

    <!-- Professional Information Section -->
    <div class="form-section">
      <h4 class="section-title">Professional Information</h4>
      
      <div class="form-group">
        <div class="group-img">
          <i class="feather icon-dollar-sign"></i>
          <input
            type="number"
            class="form-control"
            placeholder="Salary"
            formControlName="salaire"
            [ngClass]="{'is-invalid': updateForm.get('salaire')?.touched && updateForm.get('salaire')?.invalid}"
          />
          <div *ngIf="updateForm.get('salaire')?.touched && updateForm.get('salaire')?.invalid" class="invalid-feedback">
            <div *ngIf="updateForm.get('salaire')?.hasError('required')">
              Salary is required
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button
        type="button"
        mat-stroked-button
        mat-dialog-close
        class="cancel-btn"
      >
        <i class="feather icon-x"></i> Cancel
      </button>
      <button
        type="submit"
        mat-raised-button
        color="primary"
        class="btn btn-secondary register-btn d-inline-flex justify-content-center align-items-center w-100 btn-block"
        [disabled]="updateForm.invalid || isSubmitting"
        >
        <span *ngIf="!isSubmitting">
            <i class="feather icon-save"></i> Update Employee
        </span>
        <span *ngIf="isSubmitting">
            <i class="fa fa-spinner fa-spin"></i> Updating...
        </span>
       </button>
                                        
    </div>
  </form>
</mat-dialog-content>